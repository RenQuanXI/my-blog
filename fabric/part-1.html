<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一部分</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/ibook/assets/css/0.styles.97c30387.css" as="style"><link rel="preload" href="/ibook/assets/js/app.f3dfeeca.js" as="script"><link rel="preload" href="/ibook/assets/js/2.a89a11ce.js" as="script"><link rel="preload" href="/ibook/assets/js/17.36356e53.js" as="script"><link rel="prefetch" href="/ibook/assets/js/10.af12a82d.js"><link rel="prefetch" href="/ibook/assets/js/11.6cc43d9b.js"><link rel="prefetch" href="/ibook/assets/js/12.c1c3dc10.js"><link rel="prefetch" href="/ibook/assets/js/13.dca409ac.js"><link rel="prefetch" href="/ibook/assets/js/14.4d879880.js"><link rel="prefetch" href="/ibook/assets/js/15.85aa52f1.js"><link rel="prefetch" href="/ibook/assets/js/16.0c26d41c.js"><link rel="prefetch" href="/ibook/assets/js/18.24a4eb8e.js"><link rel="prefetch" href="/ibook/assets/js/19.d1dc4ccb.js"><link rel="prefetch" href="/ibook/assets/js/20.10200094.js"><link rel="prefetch" href="/ibook/assets/js/21.3bb51aa7.js"><link rel="prefetch" href="/ibook/assets/js/22.c7c5a85d.js"><link rel="prefetch" href="/ibook/assets/js/23.72040ccb.js"><link rel="prefetch" href="/ibook/assets/js/24.c4b914ae.js"><link rel="prefetch" href="/ibook/assets/js/25.161a7752.js"><link rel="prefetch" href="/ibook/assets/js/26.fa65ff0a.js"><link rel="prefetch" href="/ibook/assets/js/27.37286a9b.js"><link rel="prefetch" href="/ibook/assets/js/28.7843ccc5.js"><link rel="prefetch" href="/ibook/assets/js/29.f1d9dec2.js"><link rel="prefetch" href="/ibook/assets/js/3.fb47020c.js"><link rel="prefetch" href="/ibook/assets/js/30.7cef5e20.js"><link rel="prefetch" href="/ibook/assets/js/31.876b1486.js"><link rel="prefetch" href="/ibook/assets/js/32.250a8170.js"><link rel="prefetch" href="/ibook/assets/js/33.04cc6c24.js"><link rel="prefetch" href="/ibook/assets/js/34.a11a10f8.js"><link rel="prefetch" href="/ibook/assets/js/35.40fa11c8.js"><link rel="prefetch" href="/ibook/assets/js/36.bfeb614f.js"><link rel="prefetch" href="/ibook/assets/js/37.cdd7760e.js"><link rel="prefetch" href="/ibook/assets/js/38.c7aee897.js"><link rel="prefetch" href="/ibook/assets/js/39.3b49dfa4.js"><link rel="prefetch" href="/ibook/assets/js/4.eb34ec45.js"><link rel="prefetch" href="/ibook/assets/js/40.62e8e526.js"><link rel="prefetch" href="/ibook/assets/js/41.50410ec0.js"><link rel="prefetch" href="/ibook/assets/js/42.1b86548f.js"><link rel="prefetch" href="/ibook/assets/js/43.2ae6caa2.js"><link rel="prefetch" href="/ibook/assets/js/44.75f7a0a7.js"><link rel="prefetch" href="/ibook/assets/js/5.fc1e6d38.js"><link rel="prefetch" href="/ibook/assets/js/6.1f874886.js"><link rel="prefetch" href="/ibook/assets/js/7.f700d755.js"><link rel="prefetch" href="/ibook/assets/js/8.ecde6251.js"><link rel="prefetch" href="/ibook/assets/js/9.864b0981.js">
    <link rel="stylesheet" href="/ibook/assets/css/0.styles.97c30387.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><main><main slot="sidebar-top"><a href="https://github.com/renquanxi" aria-label="View source on GitHub" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path> <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path> <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a></main> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ibook/" class="home-link router-link-active"><img src="/ibook/image/logo_smile.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ibook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS语法基础.html" class="nav-link">
  JS语法基础
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS进阶语法.html" class="nav-link">
  JS进阶语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/webAPI.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/jQuery常用语法.html" class="nav-link">
  jQuery常用语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/ES6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Ajax 笔记整理.html" class="nav-link">
  Ajax 笔记整理
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/git学习.html" class="nav-link">
  git学习
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/常用数组方法整理.html" class="nav-link">
  常用数组方法整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/fabric/" class="nav-link router-link-active">
  fabric中文文档
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/question/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/ibook/createblog/" class="nav-link">
  vuepress相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/collect/01.网站/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/ibook/collect/02.资源/" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/renquanxi/ibook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  查看源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ibook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS语法基础.html" class="nav-link">
  JS语法基础
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS进阶语法.html" class="nav-link">
  JS进阶语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/webAPI.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/jQuery常用语法.html" class="nav-link">
  jQuery常用语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/ES6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Ajax 笔记整理.html" class="nav-link">
  Ajax 笔记整理
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/git学习.html" class="nav-link">
  git学习
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/常用数组方法整理.html" class="nav-link">
  常用数组方法整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/fabric/" class="nav-link router-link-active">
  fabric中文文档
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/question/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/ibook/createblog/" class="nav-link">
  vuepress相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/collect/01.网站/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/ibook/collect/02.资源/" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/renquanxi/ibook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  查看源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ibook/fabric/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/ibook/fabric/part-1.html" aria-current="page" class="active sidebar-link">第一部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#为什么要做fabric" class="sidebar-link">为什么要做fabric</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#fabric中的对象" class="sidebar-link">Fabric中的对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#操作对象" class="sidebar-link">操作对象</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#默认设置" class="sidebar-link">默认设置</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#层次和继承" class="sidebar-link">层次和继承</a></li></ul></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#canvas" class="sidebar-link">Canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#互动" class="sidebar-link">互动</a></li></ul></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#图像" class="sidebar-link">图像</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#路径-paths" class="sidebar-link">路径（Paths）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-1.html#后记" class="sidebar-link">后记</a></li></ul></li><li><a href="/ibook/fabric/part-2.html" class="sidebar-link">第二部分</a></li><li><a href="/ibook/fabric/part-3.html" class="sidebar-link">第三部分</a></li><li><a href="/ibook/fabric/part-4.html" class="sidebar-link">第四部分</a></li><li><a href="/ibook/fabric/part-5.html" class="sidebar-link">第五部分</a></li><li><a href="/ibook/fabric/part-6.html" class="sidebar-link">第六部分</a></li><li><a href="/ibook/fabric/part-7.html" class="sidebar-link">第七部分</a></li><li><a href="/ibook/fabric/part-8.html" class="sidebar-link">第八部分</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第一部分"><a href="#第一部分" class="header-anchor">#</a> 第一部分</h1> <p><img src="https://github.com/kangax/fabric.js/raw/master/lib/screenshot.png" alt=" "></p> <p>今天我开始像您介绍<a href="http://fabricjs.com/" target="_blank" rel="noopener noreferrer">Fabric<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，一个功能强大的Javascript库，运行在HTML5 canvas上，Fabric为画布提供了一个缺失的对象模型，以及一个SVG解析器，一个交互层，以及一整套其他必不可少的工具。它是一个完全开放源码的项目，在MIT许可，多年来做出了许多贡献。</p> <p>三年前我开始开发Fabric，在发现使用原生canvas的API之后，我正在为<a href="http://printio.ru/" target="_blank" rel="noopener noreferrer">printio.ru<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>创建一个互动设计编辑器：我的创业公司允许用户设计自己的服装。在这些日子里，我们想要的那种交互性只存在于Flash应用中。而现在，&quot;Fabric&quot;成为可能。</p> <p>让我们来看看吧！</p> <h2 id="为什么要做fabric"><a href="#为什么要做fabric" class="header-anchor">#</a> 为什么要做fabric</h2> <p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html" target="_blank" rel="noopener noreferrer">Canvas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以让我们在网络上创造出绝对惊人的图形。但它提供的API是令人失望的。如果我们只想在画布上画几条基本的形状，不会觉得有什么繁琐。但是一旦需要任何形式的互动，任何时候改变图片或绘制更复杂的形状，代码复杂度会急剧增加。</p> <p>Fabric旨在解决这个问题。</p> <p>原生canvas方法只允许我们触发简单的图形命令，盲目的修改canvas的位图，想画一个矩形？使用<code>fillRect(left, top, width, height).</code>，想画一条线？使用<code>moveTo(left, top)</code> 和 <code>lineTo(x, y)</code>的组合命令，就好像我们<strong>用刷子画画</strong>，上层涂上越来越多的颜料，几乎没有控制。</p> <p>Fabric不是在这么低的层次上运行，而是在原生方法之上提供简单而强大的对象模型。它负责画布状态和渲染，并让我们直接使用绘制后的“对象”。</p> <p>让我们来看一个简单的例子来说明这个差异。假设我们想在画布上画一个红色的矩形。以下是我们如何使用原生的<code>&lt;canvas&gt;</code> API。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 有一个id是c的canvas元素</span>
<span class="token keyword">var</span> canvasEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取2d位图模型</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvasEl<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置填充颜色</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个坐标100，190，尺寸是20，20的矩形</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在使用Fabric做同样的事情：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 用原生canvas元素创建一个fabric实例</span>
<span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个矩形对象</span>
<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  fill<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将矩形添加到canvas画布上</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/1.png" alt=" "></p> <p>在这种情况下，这两个例子非常相似，大小几乎没有差别。但是，您可以看到使用canvas的方法有多么不同。使用原生方法，我们在<strong>上下文</strong>中操作（表示整个画布位图的对象），在Fabric中，我们操作对象，实例化它们，更改其属性，并将其添加到画布。你可以看到这些对象是Fabric中的<strong>第一等公民</strong>。</p> <p>但渲染纯正的红色矩形就如此无聊。我们至少可以做一些有趣的事情！也许，稍稍旋转？</p> <p>旋转45度，首先使用原生的canvas方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvasEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvasEl<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用Fabric：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个45度的矩形</span>
<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  fill<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  angle<span class="token operator">:</span> <span class="token number">45</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2.png" alt=" "></p> <p>这里发生了什么？</p> <p>我们在Fabric中所做的一切都是将对象的“角度”值更改为<code>45</code>。然而使用原生的方法，事情变得更加有趣，记住我们无法对对象进行操作，相反，我们调整整个画布位图（<code>ctx.translate</code>，<code>ctx.rotate</code>）的位置和角度，以适应我们的需要。然后，我们再次绘制矩形，但记住要正确地偏移位图（-10，-10），所以它仍然呈现在100,100点。作为练习，我们不得不在旋转画布位图时将度数转换为弧度。</p> <p>我相信你刚刚开始明白为什么面料存在，以及它解决了多少低级写法。</p> <p>如果在某些时候，我们想将现在熟悉的红色矩形移动到画布上稍微不同的位置怎么办？我们如何在无法操作对象的情况下执行此操作？我们会在canvas位图上调用另一个<code>fillRect</code>吗？</p> <p>不完全的。调用另一个<code>fillRect</code>命令实际上在画布上绘制的东西所有之上绘制矩形。还记得我前边说的用刷子画画吗？为了“移动”它，我们需要先<strong>擦除以前绘制的内容</strong>，然后在新的位置绘制矩形。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvasEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>
ctx<span class="token punctuation">.</span><span class="token function">strokRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

<span class="token comment">// 擦除整个画布</span>
ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvasEl<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvasEl<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们如何用Fabric完成这个？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/3.png" alt=" "></p> <p>注意一个非常重要的区别。使用Fabric，在尝试“修改”任何内容之前，我们不再需要擦除内容。我们仍然使用对象，只需更改其属性，然后重新绘制画布即可获得“最新图片”。</p> <h2 id="fabric中的对象"><a href="#fabric中的对象" class="header-anchor">#</a> Fabric中的对象</h2> <p>我们已经看到如何通过实例化<code>fabric.Rect</code>构造函数来处理矩形。当然，Fabric也涵盖了所有其他的基本形状：圆，三角形，椭圆等。所有的这些在就是Fabric“命名空间”下的：<code>fabric.Circle</code>，<code>fabric.Triangle</code>，<code>fabric.Ellipse</code>等。</p> <p>Fabric提供了7种基础形状：</p> <ul><li><a href="http://fabricjs.com/docs/fabric.Circle.html" target="_blank" rel="noopener noreferrer">fabric.Circle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Ellipse.html" target="_blank" rel="noopener noreferrer">fabric.Ellipse<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Line.html" target="_blank" rel="noopener noreferrer">fabric.Line<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Polygon.html" target="_blank" rel="noopener noreferrer">fabric.Polygon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Polyline.html" target="_blank" rel="noopener noreferrer">fabric.Polyline<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Rect.html" target="_blank" rel="noopener noreferrer">fabric.Rect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://fabricjs.com/docs/fabric.Triangle.html" target="_blank" rel="noopener noreferrer">fabric.Triangle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>想画一个圆？只需创建一个圆形对象，并将其添加到画布。与任何其他基本形状相同：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> triangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Triangle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">50</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> triangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/4.png" alt=" "></p> <p>这是一个绿色的圆形在100，100的位置，蓝色的三角形在50，50的位置。</p> <h3 id="操作对象"><a href="#操作对象" class="header-anchor">#</a> 操作对象</h3> <p>创建图形对象矩形，圆形或其他东西，当然只是开始。在某些时候，我们可能想修改这些对象。或许某些行为需要触发状态的变化，或进行某种动画。或者我们可能希望在某些鼠标交互中更改对象属性（颜色，不透明度，大小，位置）。</p> <p>Fabric为我们处理画布渲染和状态管理。我们只需要自己修改对象。</p> <p>以前的例子演示了<code>set</code>方法，以及如何从对象前一个位置调用<code>set({left：20，top：50})</code>来移动对象。以类似的方式，我们可以改变对象的任何其他属性。但这些属性是什么？</p> <p>那么，正如你所期望的那样，可以改变定位：<strong>top</strong>，<strong>left</strong>。尺寸：<strong>width</strong>，<strong>height</strong>。渲染： <strong>fill</strong>, <strong>opacity</strong>, <strong>stroke</strong>, <strong>strokeWidth</strong>。缩放和旋转：<strong>scaleX</strong>, <strong>scaleY</strong>, <strong>angle</strong>;甚至可以翻转：<strong>flipX</strong>，<strong>flipY</strong>。歪斜：<strong>skewX</strong>，<strong>skewY</strong>。</p> <p>是的，在Fabric中翻转对象非常简单，将<code>flip[X|Y]</code>设置为<code>true</code>即可。</p> <p>您可以通过<code>get</code>方法读取任何这些属性，并通过<code>set</code>进行设置。我们尝试改变一些红色矩形的属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span>

rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> strokeWidth<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> stroke<span class="token operator">:</span> <span class="token string">'rgba(100,200,200,0.5)'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'flipY'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/5.png" alt=" "></p> <p>首先，我们将“fill”值设置为“red”，使对象成为红色。下一个语句设置“strokeWidth”和“stroke”值，给出矩形为淡绿色的5px笔画。最后，我们正在改变“angle”和“flipY”的属性。注意每个3个语句中的每个语句使用的语法略有不同。</p> <p>这表明<code>set</code>是一种通用的方法。你可能经常使用它，所以它被设计得尽可能的方便。</p> <p>说了如何<code>set</code>的方法，那么如何获取呢？这就有了与之对应的<code>get</code>方法，h还有一些具体的<code>get*</code>，要读取对象的“width”值，可以使用<code>get('width')</code>或<code>getWidth()</code>。获取“scaleX”值使用<code>get('scaleX')</code>或<code>getScaleX()</code>，等等。对于每个“公有”对象属性(“stroke”，“strokeWidth”，“angle”等)，都可以使用getWidth或getScaleX等方法。</p> <p>您可能会注意到，在早期的示例中，对象在实例化的时候，我们直接传入的配置参数，而上边的例子我们才实例化对象的时候没有传入配置，而是使用的<code>set</code>方法传递配置。这是因为它是完全一样的。您可以在创建时“配置”对象，也可以使用<code>set</code>方法:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'#f55'</span><span class="token punctuation">,</span> opacity<span class="token operator">:</span> <span class="token number">0.7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 或者这样</span>

<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'#f55'</span><span class="token punctuation">,</span> opacity<span class="token operator">:</span> <span class="token number">0.7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="默认设置"><a href="#默认设置" class="header-anchor">#</a> 默认设置</h3> <p>关于这一点，您可能会问，当我们创建对象而不传递任何“配置”对象时会发生什么。它还有这些属性吗？</p> <p>当然是。 Fabric 中的对象总是具有一组默认的属性值。
在创建过程中参数未被传递时会被设置成默认的参数。我们可以自己试试看看：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 注意没有传递参数</span>

rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rgb(0,0,0)</span>
rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'stroke'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

rect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p>我们的矩形有一组默认的属性。它位于 0,0，黑色，完全不透明，没有描边，<strong>没有尺寸</strong>（宽度和高度为0）。由于没有尺寸，我们无法在画布上看到它。但是给它宽度/高度的任何正值肯定会在画布的左上角显示一个黑色矩形。</p> <p><img src="http://fabricjs.com/article_assets/6.png" alt=" "></p> <h3 id="层次和继承"><a href="#层次和继承" class="header-anchor">#</a> 层次和继承</h3> <p>Fabric对象不仅彼此独立存在。它们形成一个非常精确的层次。</p> <p>大多数对象从根<code>fabric.Object</code>继承。<code>fabric.Object</code>几乎代表二维形状，位于二维canvas平面，它是一个具有left / top和width / height属性的实体，以及一些其他图形特征。我们在物体上看到的那些属性：fill，stroke，angle，opacity，flip[X|Y]等，对于从<code>fabric.Object</code>继承的所有Fabric对象都是通用的。</p> <p>这个继承允许我们在<code>fabric.Object</code>上定义方法，并在所有的“类”之间共享它们。例如，如果您想在所有对象上使用<code>getAngleInRadians</code>方法，您只需在<code>fabric.Object.prototype</code>上创建它即可：</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getAngleInRadians</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> angle<span class="token operator">:</span> <span class="token number">45</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rect<span class="token punctuation">.</span><span class="token function">getAngleInRadians</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.785...</span>

<span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> angle<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
circle<span class="token punctuation">.</span><span class="token function">getAngleInRadians</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.523...</span>

circle <span class="token keyword">instanceof</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
circle <span class="token keyword">instanceof</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>您可以看到，方法立即在所有实例上可用。</p> <p>虽然子类“class”继承自<code>fabric.Object</code>，但它们通常也定义自己的方法和属性。例如，<code>fabric.Circle</code>需要有“radius”属性。而<code>Fabric.Image</code>（我们稍后会看），需要使用<code>getElement</code> / <code>setElement</code>方法来访问/设置图像实例的真实HTML<code>&lt;img&gt;</code>元素。</p> <p>使用原型来获取自定义渲染和行为对于高级项目来说是非常普遍的。</p> <h2 id="canvas"><a href="#canvas" class="header-anchor">#</a> Canvas</h2> <p>现在我们更详细地讨论了对象，让我们回到 canvas。</p> <p>首先你可以看到所有的Fabric例子如果创建 canvas 对象：<code>new fabric.Canvas('...')</code>。<code>fabric.Canvas</code>作为围绕<code>&lt;canvas&gt;</code>元素的包装器，并负责管理该canvas上的所有Fabric对象。它需要一个元素的id，并返回一个<code>fabric.Canvas</code>的实例。</p> <p>我们可以<code>add</code>对象，引用它们，或者<code>remove</code>它们：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加对象</span>

canvas<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 源于刚刚添加的第一个矩形对象</span>
canvas<span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取所有对象（只有一个矩形）</span>

canvas<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除这个矩形</span>
</code></pre></div><p>尽管管理对象是<code>fabric.Canvas</code>的主要目的。其实它本身也是<strong>可配置</strong>的，需要为整个画布设置背景颜色或图像？将所有内容剪切到某个区域？设置不同的宽度/高度？指定画布是否互动？所有这些选项（和其他）可以在<code>fabric.Canvas</code>上设置，无论是在创建时还是之后：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  backgroundColor<span class="token operator">:</span> <span class="token string">'rgb(100,100,200)'</span><span class="token punctuation">,</span>
  selectionColor<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
  selectionLineWidth<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 或者</span>

<span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">setBackgroundImage</span><span class="token punctuation">(</span><span class="token string">'http://...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function-variable function">onFpsUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre></div><h3 id="互动"><a href="#互动" class="header-anchor">#</a> 互动</h3> <p>虽然我们是一个canvas元素的主题，我们来谈谈互动。Fabric的独特功能之一，在我们刚刚看到的所有的对象模型之上，是一层交互性。</p> <p>存在对象模型以允许编程访问和操纵画布上的对象。但在外部，在用户层面上，有一种方式可以通过鼠标（或触摸，触摸设备）来操纵这些对象。一旦您通过<code>new fabric.Canvas（'...'）</code>初始化画布，可以选择对象，拖动它们，缩放或旋转它们，甚至组合在一起操纵一个<strong>组合</strong>！</p> <p><img src="http://fabricjs.com/article_assets/7.png" alt=" "> <img src="http://fabricjs.com/article_assets/8.png" alt=" "></p> <p>如果我们希望允许用户在画布上拖动某些东西，比如一个图片，我们需要做的就是初始化画布并在其上添加一个对象。不需要额外的配置或设置。</p> <p>为了控制这种交互性，我们可以在画布上使用 Fabric 的 <code>selection</code> 布尔属性，结合各个对象的 <code>selectable</code> 布尔属性来使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
canvas<span class="token punctuation">.</span>selection <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 禁止所有选中</span>
rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'selectable'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只是禁止这个矩形选中</span>
</code></pre></div><p>但是如果根本不想要这样的互动呢？如果是这样，您可以随时用<code>fabric.StaticCanvas</code>替换<code>fabric.Canvas</code>。初始化的语法是相同的;初始化时使用<code>StaticCanvas</code>而不是<code>Canvas</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> staticCanvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>StaticCanvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

staticCanvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    fill<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span>
    angle<span class="token operator">:</span> <span class="token number">30</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这将创建一个“更轻”的画布版本，没有任何事件处理逻辑。请注意，您仍然有一个完整的对象模型来使用：添加对象，删除或修改它们，以及更改任何画布配置，所有这一切仍然有效。这只是事件处理没有了。</p> <p>当我们浏览自定义构建选项时，您会看到，如果<code>StaticCanvas</code>是您需要的选项，您甚至可以创建一个较轻的Fabric版本。如果您需要非交互式图表，或者在应用程序中使用过滤器的非交互式图像，这可能是一个不错的选择。</p> <h2 id="图像"><a href="#图像" class="header-anchor">#</a> 图像</h2> <p>说到图像...</p> <p>在画布上添加矩形和圆圈很有趣，但为什么我们不玩某些图像？正如你现在想象的那样，Fabric 使这个很容易。我们来实例化<code>fabric.Image</code>对象并将其添加到画布中：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my_image.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> imgElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-image'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> imgInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Image</span><span class="token punctuation">(</span>imgElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  angle<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.85</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>imgInstance<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意我们如何将图像元素传递给<code>fabric.Image</code>构造函数。这将创建一个<code>fabric.Image</code>的实例，就像文档中的图像一样。此外，我们立即将左/上值设置为100/100，角度为30，不透明度为0.85。一旦添加到画布中，图像呈现在100,100位置，30度角，并且稍微透明！不错。</p> <p><img src="http://fabricjs.com/article_assets/9.png" alt=" "></p> <p>现在，如果我们在文档中真的没有图像，而只是一个图像的URL呢？我们来看看如何使用<code>fabric.Image.fromURL</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span><span class="token string">'my_image.png'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oImg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>看起来很简单，不是吗？只需调用具有图像URL的<code>fabric.Image.fromURL</code>，并在加载和创建图像后给它一个回调函数来调用。回调函数接收已经创建的<code>fabric.Image</code>对象作为第一个参数。此时，您可以将其添加到画布中，也可以先更改，然后添加到画布：</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span><span class="token string">'my_image.png'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oImg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 将其缩小，然后将其翻转，然后再将其添加到画布上</span>
  oImg<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>'flipX<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>oImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="路径-paths"><a href="#路径-paths" class="header-anchor">#</a> 路径（Paths）</h2> <p>我们已经看过简单的形状，然后看了图像。那么更复杂，丰富的形状和内容呢？</p> <p>认识更强大的搭档：路径（Path）和组合（Groups）</p> <p>Fabric 中的 paths 表示可以填充，描边和修改的形状的轮廓。Paths 由一系列命令组成，基本上模仿了从一个点到另一个点的笔。借助“move”，“line”，“curve”或“arc”等命令，path可以形成令人难以置信的复杂形状。在Paths（路径组合）团队的帮助下，可能性更大。</p> <p>Fabric 中的路径与 <a href="http://www.w3.org/TR/SVG/paths.html#PathElement" target="_blank" rel="noopener noreferrer"> SVG &lt; path &gt;元素<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 非常相似。它们使用相同的命令，可以从<code>&lt;path&gt;</code>元素创建，并将其序列化。稍后我们将更加仔细地观察序列化和SVG解析，但现在值得一提的是，您很可能很少手动创建Path实例，相反，您将使用Fabric的内置SVG解析器。但是要了解Path对象是什么，我们来尝试用手创建一个简单的对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Path</span><span class="token punctuation">(</span><span class="token string">'M 0 0 L 200 100 L 170 200 z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">120</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/10.png" alt=" "></p> <p>我们通过传递一串路径指令，实例化<code>fabric.Path</code>对象，虽然看起来很神秘，但实际上很容易理解。“M”代表“move”命令，并告诉笔移动到<code>0,0</code>坐标。“L”表示“line”，笔画线为<code>200,100</code>坐标。然后，另一个“L”创建一个连接<code>170,200</code>坐标的线段。最后，“z”指示绘画笔关闭当前路径并完成形状。结果，我们得到一个三角形。</p> <p>由于<code>fabric.Path</code>与Fabric中的任何其他对象一样，我们还可以更改其某些属性。但是我们可以修改更多：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Path</span><span class="token punctuation">(</span><span class="token string">'M 0 0 L 300 100 L 200 300 z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fill<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> stroke<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> opacity<span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/11.png" alt=" "></p> <p>出于好奇，我们来看一下稍微更复杂的path语法。你会看到为什么手动创建路径可能不是最好的主意。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Path</span><span class="token punctuation">(</span><span class="token string">'M121.32,0L44.58,0C36.67,0,29.5,3.22,24.31,8.41\
c-5.19,5.19-8.41,12.37-8.41,20.28c0,15.82,12.87,28.69,28.69,28.69c0,0,4.4,\
0,7.48,0C36.66,72.78,8.4,101.04,8.4,101.04C2.98,106.45,0,113.66,0,121.32\
c0,7.66,2.98,14.87,8.4,20.29l0,0c5.42,5.42,12.62,8.4,20.28,8.4c7.66,0,14.87\
-2.98,20.29-8.4c0,0,28.26-28.25,43.66-43.66c0,3.08,0,7.48,0,7.48c0,15.82,\
12.87,28.69,28.69,28.69c7.66,0,14.87-2.99,20.29-8.4c5.42-5.42,8.4-12.62,8.4\
-20.28l0-76.74c0-7.66-2.98-14.87-8.4-20.29C136.19,2.98,128.98,0,121.32,0z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>看一下这里发生了什么？</p> <p>那么“M”仍然代表“move”的命令，所以笔在“121.32,0”点开始绘画。然后有“L”命令使其为“44.58,0”。到现在为止还可以理解。下一步是什么？ “C”指令，代表“cubic bezier”（贝塞尔曲线）。它使笔从当前点绘制贝塞尔曲线到“36.67,0”，它以“29.5,3.22”为起点的控制点，“24.31,8.41”为终点的控制点。这整个事情之后是十几个其他的“cubic bezier”命令，最终创建一个漂亮的箭头形状。</p> <p><img src="http://fabricjs.com/article_assets/12.png" alt=" "></p> <p>不过你可能永远不会使用这样复杂的命令，相反，您可能需要使用像<code>fabric.loadSVGFromString</code>或<code>fabric.loadSVGFromURL</code>方法来加载整个SVG文件,然后让Fabric的SVG解析器完成对所有SVG元素的遍历和创建相应的Path对象的工作。</p> <p>谈到整个SVG文件，而Fabric的路径通常表示SVG<code>&lt;path&gt;</code>元素，SVG文档中通常存在的路径集合表示为Group(<code>fabric.Group</code>实例)。你可以想像，Group(组合)只不过是一组Path实例和其他对象。而且由于<code>fabric.Group</code>从<code>fabric.Object</code>继承，它可以像任何其他对象一样添加到画布中，并以相同的方式进行操作。</p> <p>就像Path一样，你可能不会直接的使用它。但是，如果您在解析SVG文档之后偶然发现了一个问题，那么您将确切地知道它是什么以及它的目的是什么。</p> <h2 id="后记"><a href="#后记" class="header-anchor">#</a> 后记</h2> <p>我们只触及了Fabric的表面。你现在可以很容易地创建任何一个简单的形状，复杂的形状，图像;将它们添加到画布中，并以任何你想要的方式进行修改：位置、尺寸、角度、颜色、笔画、不透明度等。</p> <p>在本系列的下一部分，我们将看看组合，动画，文本，SVG解析，渲染，序列化，事件，图像，滤镜等。</p> <p>与此同时，你可以随意查看带注释的<a href="http://fabricjs.com/demos/" target="_blank" rel="noopener noreferrer">演示<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或<a href="http://fabricjs.com/benchmarks/" target="_blank" rel="noopener noreferrer">基准<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，加入<a href="https://groups.google.com/forum/?fromgroups#!forum/fabricjs" target="_blank" rel="noopener noreferrer">Google小组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或<a href="http://stackoverflow.com/questions/tagged/fabricjs" target="_blank" rel="noopener noreferrer">其他地方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的讨论，或者直接访问<a href="http://fabricjs.com/docs/" target="_blank" rel="noopener noreferrer">docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/kangax/fabric.js/wiki" target="_blank" rel="noopener noreferrer">wiki<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://github.com/kangax/fabric.js" target="_blank" rel="noopener noreferrer">源代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>做一些有趣的实验！我希望你喜欢这次旅行。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/6/2021, 11:19:22 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ibook/fabric/" class="prev router-link-active">
        目录
      </a></span> <span class="next"><a href="/ibook/fabric/part-2.html">
        第二部分
      </a>
      →
    </span></p></div> </main></div> <div class="footer" data-v-34d4abe6><div id="footer-info" data-v-34d4abe6><div class="footer-left" data-v-34d4abe6>
      © 2016-2021
      <span data-v-34d4abe6><a href="https://github.com/renquanxi/" target="_blank">清欢先生</a></span></div> <div class="footer-right" data-v-34d4abe6>Theme:<a href="https://github.com/JoeyBling/vuepress-theme-yilia-plus" target="_blank">vuepress-theme-yilia-plus</a> by Litten</div></div> <div class="busuanzi" data-v-34d4abe6><span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量
    <span id="busuanzi_value_site_pv"></span>次
    <span class="post-meta-divider">|</span></span> <span id="busuanzi_container_site_uv" style="display:none">
    本站访客数
    <span id="busuanzi_value_site_uv"></span>人
  </span></div></div></main><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:185px;height:350px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="185" height="350" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:185px;height:350px;"></canvas></div><!----></div></div>
    <script src="/ibook/assets/js/app.f3dfeeca.js" defer></script><script src="/ibook/assets/js/2.a89a11ce.js" defer></script><script src="/ibook/assets/js/17.36356e53.js" defer></script>
  </body>
</html>
