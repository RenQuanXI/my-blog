<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第二部分</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/ibook/assets/css/0.styles.97c30387.css" as="style"><link rel="preload" href="/ibook/assets/js/app.f3dfeeca.js" as="script"><link rel="preload" href="/ibook/assets/js/2.a89a11ce.js" as="script"><link rel="preload" href="/ibook/assets/js/18.24a4eb8e.js" as="script"><link rel="prefetch" href="/ibook/assets/js/10.af12a82d.js"><link rel="prefetch" href="/ibook/assets/js/11.6cc43d9b.js"><link rel="prefetch" href="/ibook/assets/js/12.c1c3dc10.js"><link rel="prefetch" href="/ibook/assets/js/13.dca409ac.js"><link rel="prefetch" href="/ibook/assets/js/14.4d879880.js"><link rel="prefetch" href="/ibook/assets/js/15.85aa52f1.js"><link rel="prefetch" href="/ibook/assets/js/16.0c26d41c.js"><link rel="prefetch" href="/ibook/assets/js/17.36356e53.js"><link rel="prefetch" href="/ibook/assets/js/19.d1dc4ccb.js"><link rel="prefetch" href="/ibook/assets/js/20.10200094.js"><link rel="prefetch" href="/ibook/assets/js/21.3bb51aa7.js"><link rel="prefetch" href="/ibook/assets/js/22.c7c5a85d.js"><link rel="prefetch" href="/ibook/assets/js/23.72040ccb.js"><link rel="prefetch" href="/ibook/assets/js/24.c4b914ae.js"><link rel="prefetch" href="/ibook/assets/js/25.161a7752.js"><link rel="prefetch" href="/ibook/assets/js/26.fa65ff0a.js"><link rel="prefetch" href="/ibook/assets/js/27.37286a9b.js"><link rel="prefetch" href="/ibook/assets/js/28.7843ccc5.js"><link rel="prefetch" href="/ibook/assets/js/29.f1d9dec2.js"><link rel="prefetch" href="/ibook/assets/js/3.fb47020c.js"><link rel="prefetch" href="/ibook/assets/js/30.7cef5e20.js"><link rel="prefetch" href="/ibook/assets/js/31.876b1486.js"><link rel="prefetch" href="/ibook/assets/js/32.250a8170.js"><link rel="prefetch" href="/ibook/assets/js/33.04cc6c24.js"><link rel="prefetch" href="/ibook/assets/js/34.a11a10f8.js"><link rel="prefetch" href="/ibook/assets/js/35.40fa11c8.js"><link rel="prefetch" href="/ibook/assets/js/36.bfeb614f.js"><link rel="prefetch" href="/ibook/assets/js/37.cdd7760e.js"><link rel="prefetch" href="/ibook/assets/js/38.c7aee897.js"><link rel="prefetch" href="/ibook/assets/js/39.3b49dfa4.js"><link rel="prefetch" href="/ibook/assets/js/4.eb34ec45.js"><link rel="prefetch" href="/ibook/assets/js/40.62e8e526.js"><link rel="prefetch" href="/ibook/assets/js/41.50410ec0.js"><link rel="prefetch" href="/ibook/assets/js/42.1b86548f.js"><link rel="prefetch" href="/ibook/assets/js/43.2ae6caa2.js"><link rel="prefetch" href="/ibook/assets/js/44.75f7a0a7.js"><link rel="prefetch" href="/ibook/assets/js/5.fc1e6d38.js"><link rel="prefetch" href="/ibook/assets/js/6.1f874886.js"><link rel="prefetch" href="/ibook/assets/js/7.f700d755.js"><link rel="prefetch" href="/ibook/assets/js/8.ecde6251.js"><link rel="prefetch" href="/ibook/assets/js/9.864b0981.js">
    <link rel="stylesheet" href="/ibook/assets/css/0.styles.97c30387.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><main><main slot="sidebar-top"><a href="https://github.com/renquanxi" aria-label="View source on GitHub" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path> <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path> <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a></main> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ibook/" class="home-link router-link-active"><img src="/ibook/image/logo_smile.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ibook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS语法基础.html" class="nav-link">
  JS语法基础
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS进阶语法.html" class="nav-link">
  JS进阶语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/webAPI.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/jQuery常用语法.html" class="nav-link">
  jQuery常用语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/ES6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Ajax 笔记整理.html" class="nav-link">
  Ajax 笔记整理
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/git学习.html" class="nav-link">
  git学习
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/常用数组方法整理.html" class="nav-link">
  常用数组方法整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/fabric/" class="nav-link router-link-active">
  fabric中文文档
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/question/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/ibook/createblog/" class="nav-link">
  vuepress相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/collect/01.网站/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/ibook/collect/02.资源/" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/renquanxi/ibook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  查看源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ibook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS语法基础.html" class="nav-link">
  JS语法基础
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/JS进阶语法.html" class="nav-link">
  JS进阶语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/webAPI.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/jQuery常用语法.html" class="nav-link">
  jQuery常用语法
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/ES6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Ajax 笔记整理.html" class="nav-link">
  Ajax 笔记整理
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/git学习.html" class="nav-link">
  git学习
</a></li><li class="dropdown-item"><!----> <a href="/ibook/studyNote/常用数组方法整理.html" class="nav-link">
  常用数组方法整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/fabric/" class="nav-link router-link-active">
  fabric中文文档
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/question/" class="nav-link">
  常见问题
</a></li><li class="dropdown-item"><!----> <a href="/ibook/createblog/" class="nav-link">
  vuepress相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ibook/collect/01.网站/" class="nav-link">
  网站
</a></li><li class="dropdown-item"><!----> <a href="/ibook/collect/02.资源/" class="nav-link">
  资源
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/renquanxi/ibook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  查看源码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ibook/fabric/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/ibook/fabric/part-1.html" class="sidebar-link">第一部分</a></li><li><a href="/ibook/fabric/part-2.html" aria-current="page" class="active sidebar-link">第二部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#动画-animate" class="sidebar-link">动画（animate）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#图像滤镜-filters" class="sidebar-link">图像滤镜（filters）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#颜色-colors" class="sidebar-link">颜色（Colors）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#渐变-gradients" class="sidebar-link">渐变（Gradients）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#文本-text" class="sidebar-link">文本（Text）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#字体-fontfamily" class="sidebar-link">字体（fontFamily）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#字体大小-fontsize" class="sidebar-link">字体大小（fontSize）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#粗体-fontweight" class="sidebar-link">粗体（fontWeight）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#文本修饰-textdecoration" class="sidebar-link">文本修饰（textDecoration）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#阴影" class="sidebar-link">阴影</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#字体风格-fontstyle" class="sidebar-link">字体风格（fontStyle）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#描边的颜色和宽度-stroke-and-strokewidth" class="sidebar-link">描边的颜色和宽度（stroke and strokeWidth）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#文本对齐-textalign" class="sidebar-link">文本对齐（textAlign）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#行高-lineheight" class="sidebar-link">行高（lineHeight）</a></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#文本背景颜色-textbackgroundcolor" class="sidebar-link">文本背景颜色（textBackgroundColor）</a></li></ul></li><li class="sidebar-sub-header"><a href="/ibook/fabric/part-2.html#事件-events" class="sidebar-link">事件（Events）</a></li></ul></li><li><a href="/ibook/fabric/part-3.html" class="sidebar-link">第三部分</a></li><li><a href="/ibook/fabric/part-4.html" class="sidebar-link">第四部分</a></li><li><a href="/ibook/fabric/part-5.html" class="sidebar-link">第五部分</a></li><li><a href="/ibook/fabric/part-6.html" class="sidebar-link">第六部分</a></li><li><a href="/ibook/fabric/part-7.html" class="sidebar-link">第七部分</a></li><li><a href="/ibook/fabric/part-8.html" class="sidebar-link">第八部分</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第二部分"><a href="#第二部分" class="header-anchor">#</a> 第二部分</h1> <p>在本系列的第一部分，我们只开始熟悉Fabric.js。我们研究了Fabric在其对象模型和对象层次结构中使用Fabric的各种实例：简单的形状，图像和复杂的路径。我们还学习了如何使用画布上的Fabric对象执行简单的操作。</p> <p>既然基础知识都差不多了，让我们开始学习一些有趣的东西吧！</p> <h2 id="动画-animate"><a href="#动画-animate" class="header-anchor">#</a> 动画（animate）</h2> <p>没有听说过哪一个强大的canvas库是没有动画功能的，当然Fabric也不例外。既然有这样一个强大的对象模型和图形功能，那么没有内置动画简直就是一种耻辱。</p> <p>住改变任何对象的属性是多么容易？我们调用<code>set</code>方法，传递相应的值：</p> <div class="language-js extra-class"><pre class="language-js"><code>rect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>那么，动画对象就像一样简单。每个Fabric对象都有<code>animate</code>方法，它可以让对象执行动画。</p> <div class="language-js extra-class"><pre class="language-js"><code>rect<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onChange<span class="token operator">:</span> canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第一个参数是动画的属性，第二个参数是动画的最终位置，如果矩形为-15°角，我们传递45，这个矩形将从-15°到45°进行动画。第三个参数是一个可选的对象，指定动画的细节：持续时间，回调，动效等。</p> <p><code>animate</code>的一个方便之处在于它还支持相对值。例如，如果要将对象向左移动100px，则可以这样做：</p> <div class="language-js extra-class"><pre class="language-js"><code>rect<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token string">'+=100'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onChange<span class="token operator">:</span> canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同样的，逆时针旋转5度，可以像这样完成：</p> <div class="language-js extra-class"><pre class="language-js"><code>rect<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">,</span> <span class="token string">'-=5'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onChange<span class="token operator">:</span> canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你可能会想知道为什么我们总是在那里指定“onChange”回调。不是说第三个参数是可选的吗？是为了每个动画帧的渲染都能让我们看到实际的动画效果！您可以看到，当我们调用<code>animate</code>方法时，它只会随着时间的推移赋予属性值，遵循特定的算法(例如动效)。所以<code>rect.animate（'angle'，45）</code>会改变对象的角度，但不会在每次角度变化后重新渲染画布屏幕。我们显然需要这种重新渲染才能看到实际的动画。</p> <p>记住，在画布的下面有整个对象模型。对象有自己的属性和关系，而canvas只负责将它们的存在投射到外部世界。</p> <p>每次更改之后，<code>animate</code>不会自动重新绘制画布的原因是由于性能。毕竟，我们可以在画布上有数以千计的动画对象，如果每个对象都尝试重新渲染屏幕，这是非常不妥的。在许多对象的情况下，您可以使用像<code>requestAnimationFrame</code>（或其他基于定时器的）循环来独立地渲染画布，而不需要为每个对象调用<code>renderAll</code>。但大多数情况下，您可能需要将<code>canvas.renderAll</code>显式指定为“onChange”的回调。</p> <p>那么我们可以通过哪些其他选项来动画？</p> <ul><li><strong>from</strong> 允许指定动画属性的起始值（如果我们不希望使用当前值）。</li> <li><strong>duration</strong> 默认为500ms。可以用来改变动画的持续时间。</li> <li><strong>onComplete</strong> 动画结束之后的回调。</li> <li><strong>easing</strong> 动效函数。</li></ul> <p>除了easing，所有这些选择都应该是不言而喻的。我们来看看吧。</p> <p>默认情况下，动画使用“easeInSine”动效执行。如果这不是你需要的，那么在<code>fabric.util.ease</code>下有一大堆动效的选项。例如，如果我们想以一种有弹性的方式将对象移到左边：</p> <div class="language-js extra-class"><pre class="language-js"><code>rect<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onChange<span class="token operator">:</span> canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">,</span>
  duration<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  easing<span class="token operator">:</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ease<span class="token punctuation">.</span>easeOutBounce
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意使用了<code>fabric.util.ease.easeOutBounce</code>作为easing的值，其他值得注意的还包括<code>easeInCubic</code>，<code>easeOutCubic</code>，<code>easeInElastic</code>，<code>easeOutElastic</code>，<code>easeInBounce</code>和<code>easeOutExpo</code>。</p> <p>所以这覆盖了Fabric的动画部分。只是给你一些可能的想法：使对象的angle改变来形成旋转动画，使对象的top/left改变来形成移动的动画，使对象的width/height改变来形成大小缩放的动画，等等。</p> <h2 id="图像滤镜-filters"><a href="#图像滤镜-filters" class="header-anchor">#</a> 图像滤镜（filters）</h2> <p>在第一节中我们学习了在Fabric中如何使用图像：<code>fabric.Image</code>构造函数，它接受图像元素。还有<code>fabric.Image.fromURL</code>方法，可以创建URL字符串的图像实例。并且这些图像可以像其他对象一样投射到canvas画布上。</p> <p>但是，像图像这种有趣的东西，对他们应用图像滤镜更加酷！</p> <p>Fabric在默认情况下提供了很少的滤镜，对于支持或不支持WEBGL的浏览器都可以使用，也很容易去定义。一些你可能非常熟悉的内置的滤镜：去除白色背景、灰度滤镜、反色或亮度调色。其他的则可能不太受欢迎： colormatrix，sepia，noise。</p> <p>那么我们怎么在Fabric中使用滤镜呢？<code>fabric.Image</code>的每个实例都有“filters”属性，它是一个简单的滤镜数组。该数组中的每个滤镜都是一个Fabric滤镜的一个实例，或您自己的自定义滤镜的一个实例。</p> <p>让我们创建一个灰度（Grayscale）图像：</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span><span class="token string">'pug.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 添加滤镜</span>
  img<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Grayscale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 图片加载完成之后，应用滤镜效果</span>
  img<span class="token punctuation">.</span><span class="token function">applyFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 将处理后的图片添加到canvas画布上</span>
  canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_1.png" alt=" "></p> <p>图像的色偏（Sepia）版本怎么样？</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span><span class="token string">'pug.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  img<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Sepia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span><span class="token function">applyFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_2.png" alt=" "></p> <p>由于“filters”属性是一个数组，我们可以用数组方法执行任何所需的操作：移除滤镜（pop，splice，shift），添加滤镜（push，unshift，splice），甚至可以组合多个滤镜。当我们调用<code>applyFilters</code>时，“filters”数组中存在的任何滤镜将逐个应用，所以让我们尝试创建一个既色偏又明亮（Brightness）的图像。</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span><span class="token string">'pug.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  img<span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Sepia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Brightness</span><span class="token punctuation">(</span><span class="token punctuation">{</span> brightness<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  img<span class="token punctuation">.</span><span class="token function">applyFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_3.png" alt=" "></p> <p>请注意，我们还将<code>{brightness：100}</code>对象传递给Brightness滤镜。这是因为有些滤镜不可配置，例如，灰度，反转，棕褐色（e.g. grayscale, invert, sepia），而其他过滤器可以配置。对于Brightness滤镜，能够配置亮度级别（-1 - 1 即： 全黑色 - 全白色）。对于噪声（noise）滤镜，能配置的是噪声值（0-1000）。对于“删除颜色”滤镜，能配置的是阈值和距离值。等等。</p> <p>那么现在，您已经熟悉了Fabric滤镜，现在是时候开箱并创建自己的滤镜了！</p> <div class="language-js extra-class"><pre class="language-js"><code>fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Redify <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  type<span class="token operator">:</span> <span class="token string">'Redify'</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 用于编程的片段源码
   */</span>
  fragmentSource<span class="token operator">:</span> <span class="token string">'precision highp float;\n'</span> <span class="token operator">+</span>
    <span class="token string">'uniform sampler2D uTexture;\n'</span> <span class="token operator">+</span>
    <span class="token string">'varying vec2 vTexCoord;\n'</span> <span class="token operator">+</span>
    <span class="token string">'void main() {\n'</span> <span class="token operator">+</span>
      <span class="token string">'vec4 color = texture2D(uTexture, vTexCoord);\n'</span> <span class="token operator">+</span>
      <span class="token string">'color.g = 0;\n'</span> <span class="token operator">+</span>
      <span class="token string">'color.b = 0;\n'</span> <span class="token operator">+</span>
      <span class="token string">'gl_FragColor = color;\n'</span> <span class="token operator">+</span>
    <span class="token string">'}'</span><span class="token punctuation">,</span>

  <span class="token function-variable function">applyTo2d</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> imageData <span class="token operator">=</span> options<span class="token punctuation">.</span>imageData<span class="token punctuation">,</span>
        data <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">,</span> i<span class="token punctuation">,</span> len <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>Brightness<span class="token punctuation">.</span>fromObject <span class="token operator">=</span> fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>BaseFilter<span class="token punctuation">.</span>fromObject<span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_4.png" alt=" "></p> <p>深入研究这段代码，主要的操作是在循环中进行。我们把绿色(data[i+1])和蓝色(data[i+2])替换为0，本质上是移除它们。标准rgb三元色的红色组件保持不变，基本上使整个图像变成红色。如您所见，<code>applyTo</code>方法传递一个选项对象，该对象包含滤镜管道的该阶段的图像的数据<code>imageData</code>。从这里，我们可以遍历其像素（getImageData（）.data），以任何我们想要的方式修改它们。如果要浏览器WEBGL启用的滤镜能够在GPU上运行，要做到这一点，你必须提供一个片段着色器来描述在像素上执行的操作。在Fabric中定义了许多滤镜，您可以在其中看到如何编写片段或着色器的示例。</p> <h2 id="颜色-colors"><a href="#颜色-colors" class="header-anchor">#</a> 颜色（Colors）</h2> <p>无论您是否使用十六进制，RGB或RGBA颜色，Fabric都能提供一个完整的颜色基础，以帮助您最自然地表达自己。以下是在Fabric中定义颜色的一些方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'#f55'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'#123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'356735'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'rgb(100,0,100)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'rgba(10, 20, 30, 0.5)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>转换也很简单。 <code>toHex（）</code>将颜色实例转换为十六进制表示。 <code>toRgb（）</code>可以转换为RGB，<code>toRgba（）</code>转换为带Alpha通道的RGB。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'#f55'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toRgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;rgb(255,85,85)&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'rgb(100,100,100)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;646464&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'fff'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;FFFFFF&quot;</span>
</code></pre></div><p>转换不仅仅可以使单一的颜色。您也可以用另一种颜色叠加，或将其转换为灰度版本。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> redish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'#f55'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> greenish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'#5f5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

redish<span class="token punctuation">.</span><span class="token function">overlayWith</span><span class="token punctuation">(</span>greenish<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;AAAA55&quot;</span>
redish<span class="token punctuation">.</span><span class="token function">toGrayscale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;A1A1A1&quot;</span>
</code></pre></div><h2 id="渐变-gradients"><a href="#渐变-gradients" class="header-anchor">#</a> 渐变（Gradients）</h2> <p>更加表现出色的方式是通过渐变。渐变让我们将一种颜色混合到另一种颜色中，创造出一些令人惊叹的图形效果。</p> <p>Fabric通过<code>setGradient</code>方法支持渐变，在所有对象上定义。调用<code>setGradient('fill', { ... })</code>就像设置一个对象的“fill”值一样，只不过我们用渐变而不是单色来填充对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  top<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">50</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

circle<span class="token punctuation">.</span><span class="token function">setGradient</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  x1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  y1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  x2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  y2<span class="token operator">:</span> circle<span class="token punctuation">.</span>height<span class="token punctuation">,</span>
  colorStops<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'#000'</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_15.png" alt=" "></p> <p>在上面的例子中，我们在100,100的位置创建一个圆圈，半径为50px。然后，我们将其填充设置为跨越整个圆形高度的渐变，从黑色到白色。</p> <p>传递给一个方法的参数是一个options对象，它需要2个坐标对（x1，y1和x2，y2）以及“colorStops”对象。坐标指出了渐变开始和结束的位置，<code>colorStops</code>指出了渐变的颜色，只要它们的范围从0到1（例如0,0.1,0.3,0.5,0.75,1），您可以根据需要定义多少个<code>colorStops</code>。0表示渐变的开始，1表示结束。</p> <p>坐标相对于物体左上角，因此圆的最高点为0，最低点为<code>circle.height</code>。 <code>setGradient</code>以相同的方式计算宽度坐标（x1，x2）。</p> <p>这是一个从左到右的红蓝渐变：</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">setGradient</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  x1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  y1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  x2<span class="token operator">:</span> circle<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
  y2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  colorStops<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_16.png" alt=" "></p> <p>这是一个彩虹🌈渐变，颜色跨度20%：</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">setGradient</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  x1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  y1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  x2<span class="token operator">:</span> circle<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
  y2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  colorStops<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
    <span class="token number">0.2</span><span class="token operator">:</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span>
    <span class="token number">0.4</span><span class="token operator">:</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span>
    <span class="token number">0.6</span><span class="token operator">:</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span>
    <span class="token number">0.8</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;purple&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_17.png" alt=" "></p> <p>你还能想到哪些炫酷的版本？</p> <h2 id="文本-text"><a href="#文本-text" class="header-anchor">#</a> 文本（Text）</h2> <p>如果你想不仅在画布上显示图像和矢量形状，还要显示文本，该怎么办？Fabric也为您准备好了！认识<code>fabric.Text</code>对象。</p> <p>我们提供文本的原因有两个，首先是允许以面向对象的方式处理文本。原生canvas方法，只允许在非常低的级别上填充或描边文本。通过实例化<code>fabric.Text</code>实例，我们可以使用文本，就像我们将使用任何其他Fabric对象：移动它，缩放它，更改其属性等。</p> <p>第二个原因是提供比canvas给我们更丰富的功能，包括：</p> <ul><li><strong>支持多行Multiline support</strong> 不幸的是，原生文本方法忽略了新建一行。</li> <li><strong>文本对齐Text alignment</strong> 左，中，右。使用多行文本时很有用。</li> <li><strong>文本背景Text background</strong> 背景也支持文本对齐。</li> <li><strong>文字装饰Text decoration</strong> 下划线，上划线，贯穿线。</li> <li><strong>行高Line Height</strong> 在使用多行文本时有用。</li> <li><strong>字符间距Char spacing</strong> 使文本更紧凑或更间隔。</li> <li><strong>子范围Subranges</strong> 将颜色和属性应用到文本对象的子对象中。</li> <li><strong>多字节Multibyte</strong> 支持表情符号。</li> <li><strong>交互式画布编辑On canvas editing</strong> 可以直接在画布上键入文本。</li></ul> <p>做一个hello world的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>那就对了！在画布上显示文本就像在所需位置添加<code>fabric.Text</code>实例一样简单。您可以看到，唯一必需的第一个参数是实际的文本字符串。第二个参数是通常的选项对象，它可以具有通常的left，top，填fill，opacity等属性。</p> <p>当然，文本对象也有自己独有的与文本相关的属性。我们来看看其中的一些：</p> <h3 id="字体-fontfamily"><a href="#字体-fontfamily" class="header-anchor">#</a> 字体（fontFamily）</h3> <p>默认设置为“Times New Roman”，此属性允许我们更改用于呈现文本对象的字体系列。更改它将立即使文本以新字体呈现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> comicSansText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm in Comic Sans&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'Comic Sans'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_5.png" alt=" "></p> <h3 id="字体大小-fontsize"><a href="#字体大小-fontsize" class="header-anchor">#</a> 字体大小（fontSize）</h3> <p>字体大小控制渲染文本的大小。请注意，与Fabric中的其他对象不同，您不能直接更改文本的width / height属性。相反，您需要更改“fontSize”值才能使文本对象更大或更小。或者，您可以随时使用scaleX / scaleY属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> text40 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm at fontSize 40&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontSize<span class="token operator">:</span> <span class="token number">40</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> text20 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm at fontSize 20&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontSize<span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_6.png" alt=" "></p> <h3 id="粗体-fontweight"><a href="#粗体-fontweight" class="header-anchor">#</a> 粗体（fontWeight）</h3> <p><code>fontWeight</code>允许使文本更粗或更薄。就像CSS一样，您可以使用关键字（“normal”，“bold”）或数字（100,200,400,600,800）。请注意，您是否可以使用某些值取决于所选字体的粗体的可用性。如果您使用远程字体，则需要确保提供正常和粗体字体定义。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> normalText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm a normal text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontWeight<span class="token operator">:</span> <span class="token string">'normal'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> boldText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm at bold text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontWeight<span class="token operator">:</span> <span class="token string">'bold'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_7.png" alt=" "></p> <h3 id="文本修饰-textdecoration"><a href="#文本修饰-textdecoration" class="header-anchor">#</a> 文本修饰（textDecoration）</h3> <p>文本修饰允许添加下划线，上划线或贯穿线到文本。这与CSS类似，但是Fabric进一步，并允许使用上述的任何组合。所以你可以有一个文本，既有下划线又有上划线，还有贯穿线。等等。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> underlineText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm an underlined text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  underline<span class="token punctuation">;</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> strokeThroughText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm a stroke-through text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  linethrough<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> overlineText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm an overline text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  overline<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_8.png" alt=" "></p> <h3 id="阴影"><a href="#阴影" class="header-anchor">#</a> 阴影</h3> <p>此属性在版本1.3.0之前被称为“textShadow”</p> <p>文本阴影由4个组件组成：颜色，水平偏移，垂直偏移和模糊大小。如果您在CSS中使用阴影，这可能看起来很熟悉。通过更改这些值可以实现许多组合。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> shadowText1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;I'm a text with shadow&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  shadow<span class="token operator">:</span> <span class="token string">'rgba(0,0,0,0.3) 5px 5px 5px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> shadowText2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;And another shadow&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  shadow<span class="token operator">:</span> <span class="token string">'rgba(0,0,0,0.2) 0 0 5px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> shadowText3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;Lorem ipsum dolor sit&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  shadow<span class="token operator">:</span> <span class="token string">'green -5px -5px 3px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_9.png" alt=" "></p> <h3 id="字体风格-fontstyle"><a href="#字体风格-fontstyle" class="header-anchor">#</a> 字体风格（fontStyle）</h3> <p>字体样式可以是2个值之一：normal（正常）或italic（斜体）。这类似于同名的CSS属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> italicText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;A very fancy italic text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontStyle<span class="token operator">:</span> <span class="token string">'italic'</span><span class="token punctuation">,</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'Delicious'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> anotherItalicText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;another italic text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontStyle<span class="token operator">:</span> <span class="token string">'italic'</span><span class="token punctuation">,</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'Hoefler Text'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_10.png" alt=" "></p> <h3 id="描边的颜色和宽度-stroke-and-strokewidth"><a href="#描边的颜色和宽度-stroke-and-strokewidth" class="header-anchor">#</a> 描边的颜色和宽度（stroke and strokeWidth）</h3> <p>通过结合stroke和strokeWidth，你可以在你的文字上获得一些有趣的效果。这里有几个例子:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> textWithStroke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;Text with a stroke&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  stroke<span class="token operator">:</span> <span class="token string">'#ff1318'</span><span class="token punctuation">,</span>
  strokeWidth<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> loremIpsumDolor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">&quot;Lorem ipsum dolor&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'Impact'</span><span class="token punctuation">,</span>
  stroke<span class="token operator">:</span> <span class="token string">'#c3bfbf'</span><span class="token punctuation">,</span>
  strokeWidth<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_11.png" alt=" "></p> <h3 id="文本对齐-textalign"><a href="#文本对齐-textalign" class="header-anchor">#</a> 文本对齐（textAlign）</h3> <p>使用多行文本时，文本对齐很有用。使用单行文本，边界框的宽度总是与该行的宽度完全匹配，因此没有任何对齐方式。</p> <p>允许的值为“left”，“center”和“right”。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'this is\na multiline\ntext\naligned right!'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> alignedRightText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  textAlign<span class="token operator">:</span> <span class="token string">'right'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_12.png" alt=" "></p> <h3 id="行高-lineheight"><a href="#行高-lineheight" class="header-anchor">#</a> 行高（lineHeight）</h3> <p>CSS中可能熟悉的另一个属性是lineHeight。它允许我们改变多行文本中文本行之间的垂直间距，只是值的规格和css中的不太一样，在以下示例中，第一个文本块的lineHeight为3，第二个为1。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> lineHeight3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">'Lorem ipsum ...'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  lineHeight<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lineHeight1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token string">'Lorem ipsum ...'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  lineHeight<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_13.png" alt=" "></p> <h3 id="文本背景颜色-textbackgroundcolor"><a href="#文本背景颜色-textbackgroundcolor" class="header-anchor">#</a> 文本背景颜色（textBackgroundColor）</h3> <p>最后，textBackgroundColor允许给文本一个背景。请注意，背景仅填充文本字符占用的空间，而不是整个边框。这意味着文本对齐改变了文本背景渲染的方式。一行的高度也是如此，因为背景是由lineHeight创建的线之间的垂直空间。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'this is\na multiline\ntext\nwith\ncustom lineheight\n&amp;background'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textWithBackground <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  textBackgroundColor<span class="token operator">:</span> <span class="token string">'rgb(0,200,0)'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="http://fabricjs.com/article_assets/2_14.png" alt=" "></p> <h2 id="事件-events"><a href="#事件-events" class="header-anchor">#</a> 事件（Events）</h2> <p>事件驱动架构是框架内一些惊人的功能和灵活性的基础。Fabric也不例外，并提供广泛的事件系统，从低级“鼠标”事件开始到高级对象。</p> <p>这些事件可以让我们在画布上发生的事件的同时，做一些事情。想知道什么时候鼠标被按下？只需要监听“mouse:down”事件，想知道什么时候对象被添加到canvas？ 监听“object:add”事件，如果想知道画布什么时候渲染完成呢？只需监听“after:render”。</p> <p>事件API非常简单，类似于jQuery，Underscore.js或其他流行的JS库。有一个<code>on</code>方法来初始化事件监听器，<code>off</code>用来删除它。</p> <p>让我们来看个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouse:down'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> options<span class="token punctuation">.</span>e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们将事件“mouse:down”事件侦听器添加到画布上，并给它一个事件处理程序，用于记录事件起始位置的坐标。换句话说，它会记录鼠标按下的位置。事件处理程序接收一个选项对象，它有两个属性<code>e</code>：事件源，以及<code>target</code>：在画布上点击的对象，它有时不存在。但是这个事件在任何时候都是存在的，但是只有当你在画布上点击某个对象时，<code>target</code>才会存在。<code>target</code>也只传递给有意义的事件处理程序。例如，会传递给“mouse:down”，而不会传递给“after:render”(表示整个画布被重新绘制)。</p> <div class="language-js extra-class"><pre class="language-js"><code>canvas<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouse:down'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'有对象被点击咯! '</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>target<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的例子将记录“有对象被点击咯！”如果您单击一个对象。它还将显示点击的对象的类型。</p> <p>那么Fabric中有哪些其他的事件呢？那么，从鼠标级别可以看到“mouse:down”，“mouse:move”和“mouse:up”。从通用方面看，有“after:render”。然后有选择相关的事件：“before:selection:cleared”, “selection:created”, “selection:cleared”，最后，对象的事件：“object:modified”，“object:selected”，“object:moving”，“object:scaling”，“object:rotate”，“object:added”和“object:removed”。</p> <p>请注意，每当一个对象被移动（或缩放）甚至一个像素时，诸如“object:moving”（或“object:scaling”）的事件被连续地触发。另一方面，诸如“object:modified”或“selection:created”之类的事件仅在操作结束时被触发（对象修改或选择创建）。</p> <p>注意我们如何将事件附加到画布上（<code>canvas.on（'mouse：down'，...）</code>）。可以想象，这意味着事件都被限定为canvas实例。如果您在页面上有多个canvas，您可以将不同的事件侦听器附加到每个canvas上。他们都是独立的，只处理分配给他们自己的事件。</p> <p>为方便起见，Fabric将进一步提升事件系统，并允许您将侦听器直接附加到canvas画布中的对象上。让我们来看看：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'green'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rect<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'selected'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selected a rectangle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> radius<span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span> fill<span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
circle<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'selected'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selected a circle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们将事件侦听器直接附加到矩形和圆形实例。使用&quot;selected&quot;来代替&quot;object:selected&quot;。同样的，使用“modified”代替“object:modified”，使用“rotating”来代替“object:rotating”。等等。。</p> <p>查看此事件<a href="http://fabricjs.com/events" target="_blank" rel="noopener noreferrer">演示<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，以更广泛地探索Fabric的事件系统</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/6/2021, 11:19:22 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ibook/fabric/part-1.html" class="prev">
        第一部分
      </a></span> <span class="next"><a href="/ibook/fabric/part-3.html">
        第三部分
      </a>
      →
    </span></p></div> </main></div> <div class="footer" data-v-34d4abe6><div id="footer-info" data-v-34d4abe6><div class="footer-left" data-v-34d4abe6>
      © 2016-2021
      <span data-v-34d4abe6><a href="https://github.com/renquanxi/" target="_blank">清欢先生</a></span></div> <div class="footer-right" data-v-34d4abe6>Theme:<a href="https://github.com/JoeyBling/vuepress-theme-yilia-plus" target="_blank">vuepress-theme-yilia-plus</a> by Litten</div></div> <div class="busuanzi" data-v-34d4abe6><span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量
    <span id="busuanzi_value_site_pv"></span>次
    <span class="post-meta-divider">|</span></span> <span id="busuanzi_container_site_uv" style="display:none">
    本站访客数
    <span id="busuanzi_value_site_uv"></span>人
  </span></div></div></main><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:185px;height:350px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="185" height="350" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:185px;height:350px;"></canvas></div><!----></div></div>
    <script src="/ibook/assets/js/app.f3dfeeca.js" defer></script><script src="/ibook/assets/js/2.a89a11ce.js" defer></script><script src="/ibook/assets/js/18.24a4eb8e.js" defer></script>
  </body>
</html>
